#!perl6

use Tomtit;

sub MAIN (
)

{

my $success-cnt = 0;
my $failures-cnt = 0;

CATCH {

  default {
    $failures-cnt++;
    .resume;
  }

}


  for scenario-list("{$*CWD}/.tom").grep({ $_ ~~ /^^ 'test-' \S / }) -> $s {

    say "[$s] ....... ";

    shell "tom $s";

    $success-cnt++;

  }

  say "=========================================";

  if $failures-cnt >= 1 {
    say ")=: ($success-cnt) tests passed / ($failures-cnt) failed"
  } else {
    say "(=: ($success-cnt) tests passed"
  }
}


