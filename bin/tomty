#!perl6

use Tomtit;

sub MAIN (
)

{

my $tests-cnt = 0;
my $failures-cnt = 0;

CATCH {

  default {
    $failures-cnt++;
    .resume;
  }

}


  for scenario-list("{$*CWD}/.tom").grep({ $_ ~~ /^^ 'test-' \S / }) -> $s {

    say "[$s] ....... ";

    shell "tom $s";

    $tests-cnt++;

  }

  say "=========================================";

  if $failures-cnt >= 1 {
    say ")=: ({$tests-cnt - $failures-cnt}) tests passed / ($failures-cnt) failed"
  } else {
    say "(=: ($tests-cnt) tests passed"
  }
}


